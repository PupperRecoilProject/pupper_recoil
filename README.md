### **指令集 (V3.3) - 專業文檔格式**

綜合以上所有討論，我為您整理出最終版的指令集文檔。

#### **目標描述符 (Target Descriptors)**
| 類型 | 描述符 | 說明 |
|---|---|---|
| 全域 | `all`, `global` | 代表全域設定。`global` 用於 `reset`，`all` 用於其他。 |
| 馬達 | `m<ID>` | e.g., `m3`。代表單一馬達 (ID: 0-11)。 |
| 關節組 | `g<name>` | e.g., `gh`, `gl0`, `gf`。代表一個關節組。 |

---
#### **1. 運動控制 (Movement)**
| 指令 | 參數 | 說明 | 範例 |
|---|---|---|---|
| `move m<id>` | `<angle>` | 移動單一馬達到絕對角度 (rad)。 | `move m3 1.57` |
| | `+<angle>` / `-<angle>` | 相對當前位置移動馬達。 | `move m3 +0.1` |
| `move g<name>` | `<angle>` | 移動功能組 (`gh`,`gu`,`gl`) 到同一角度。 | `move gh -0.5` |
| `move gl<id>` | `<h> <u> <l>` | 設定單腿三關節角度 (hip, upper, lower)。 | `move gl0 0 1.1 2.2` |
| `move g<f/r>` | `<h> <u> <l>` | 設定腿對 (`gf`,`gr`) 三關節角度。 | `move gf 0 1.1 2.2` |
| `move all` | `<angle>` | **[新]** 移動所有12顆馬達至同一角度。 | `move all 0` |
| `stand` | (無) | **(特例)** 讓機器人進入站立姿態。 | `stand` |

---
#### **2. 參數設定 (Setting)**
* **可設定參數名 (`<param>`)**: `c`, `kp`, `ki`, `max_vel`, `max_err`

| 指令 | 參數 | 說明 | 範例 |
|---|---|---|---|
| `set all` | `<param> <value>` | 設定全域參數。 | `set all kp 10.0` |
| `set g<name>` | `<param> <value>` | 設定關節組的參數覆蓋值。 | `set gh c 20` |
| `set m<id>` | `<param> <value>` | 設定單一馬達的參數覆蓋值。 | `set m5 max_vel 4.0` |

---
#### **3. 參數/狀態查詢 (Getting)**
| 指令 | 參數 | 說明 | 範例 |
|---|---|---|---|
| `get all` | (無) | **[簡化]** 顯示全域參數設定。 | `get all` |
| `get g<name>` | (無) | **[簡化]** 顯示關節組的最終生效參數。 | `get gh` |
| `get m<id>` | (無) | **[簡化]** 顯示單一馬達的最終生效參數。 | `get m3` |
| `get m<id>` | `source` | 顯示單一馬達各參數的來源。 | `get m3 source` |
| `status` | (無) | **(特例)** 顯示完整的遙測狀態報告。 | `status` |

---
#### **4. 參數重置 (Resetting)**
| 指令 | 參數 | 說明 | 範例 |
|---|---|---|---|
| `reset m<id>` | (無) | 重置單一馬達的所有參數覆蓋。 | `reset m5` |
| | `<param>` | 重置單一馬達的指定參數覆蓋。 | `reset m5 kp` |
| `reset g<name>` | (無) | 重置關節組的所有參數覆蓋。 | `reset gh` |
| `reset global` | (無) | **[簡化]** 重置所有全域設定。 | `reset global` |
| `reset all` | (無) | **[簡化]** **終極重置**：清除所有全域和所有馬達的覆蓋。 | `reset all` |

---
#### **5. 全局配置 & 系統指令 (Config & System)**
*這部分指令由於語義清晰，合併在一起。*

| 指令 | 參數 | 說明 | 範例 |
|---|---|---|---|
| `mode` | `<h/c/d>` | 設定遙測模式 (`h`uman, `c`sv, `d`ashboard)。 | `mode c` |
| `freq` | `<hz>` | 設定遙測頻率 (Hz)。 | `freq 10` |
| `focus` | `m<id>` / `off` | 設定/取消遙測焦點。 | `focus m3` |
| `cal` | (無) | **(特例)** 執行手動校準。 | `cal` |
| `stop` | (無) | **(特例)** 安全停機。 | `stop` |
| `reboot` | (無) | **(特例)** 重啟控制器。 | `reboot` |
| `raw m<id>` | `<mA>` | 發送原始電流 (mA)。 | `raw m3 500` |
| `test wiggle m<id>` | (無) | 執行擺動測試。 | `test wiggle m3` |

---
這份 V3.3 指令集現在結構更清晰，邏輯更嚴謹，並且包含了您需要的所有功能。我認為它已經達到了一個非常理想的狀態。

**如果這份最終版的設計藍圖您完全滿意，我們就可以正式開始第 2 階段的程式碼修改了。**